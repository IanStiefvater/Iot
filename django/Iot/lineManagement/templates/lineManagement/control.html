
{% load filter %}


<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Control</title>
   
</head>
<body>
    <header class="navbar navbar-expand-lg navbar-light bg-dark d-flex justify-content-evenly align-items-center">
        <nav class="w-100" >
            <div class="container-fluid">
                <button class="navbar-toggler btn-light" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon btn-light"></span>
                </button>        
              <div class="collapse navbar-collapse" id="navbarTogglerDemo01" style="font-size: 18px;">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 w-100 d-flex justify-content-evenly">
                    <li class="nav-item mx-5 px-3">
                        <a class="nav-link active text-white" aria-current="page" href="#">Inicio</a>
                    </li>
                    <li class="nav-item mx-5 px-3">
                        <a class="nav-link active text-white" aria-current="page" href="#">Operaci√≥n</a>
                    </li>
                    <li class="nav-item mx-5 px-3">
                        <a class="nav-link text-white" href="#">Fin de turno</a>
                    </li>
                </ul>
              </div>
            </div>
        </nav>
    </header>
            <div class="card mt-3 py-3 px-5  col-11 mx-auto">
                <div class="row mx-5 mt-3">
                    <div class="col-6">
                        <input type="text" name="username"  value="{{name}}" disabled class="form-control" id="floatingInput" placeholder="{{name}}">
                    </div>
                    <div class="col-6">
                        <input type="text" name="username"  value="{{turno}}" disabled class="form-control btn  btn-primary" id="floatingInput" placeholder="{{name}}">
                    </div>
                    </div>
                </div>
                
                {% for line in namelines %}
                <div class="row mt-5 py-5 card mx-5">

                    <div class="row">
                  <div class="col-6 mt-3">
                    <input type="text" name="line[]" value="{{ line }}" disabled class="form-control" id="floatingInput" placeholder="{{ name }}">
                  </div>
                  <div class="col-6 mt-3">
                    <input type="text" name="status" value="{{status|get_item:line}}" disabled class="form-control" id="floatingInput" placeholder="{{ name }}">
                  </div>
                </div>
                
                <div class="container">
                  <div class="row mt-5">
                    {% for device_name, device_count in devices.items %}
                      {% if device_name == line %}
                        <div class="row">
                          {% for i in "x"|ljust:device_count %}
                            <div class="col-auto  mx-auto">
                              <form action="" class="card">
                                <div class="row mt-5">
                                  
                                {% with counter=forloop.counter|stringformat:"s"|add:0 %}

                                 
                                <p class="text-center"> DISPOSITIVO {{ counter }}</p>
                                <p class="text-center">  {{nameDevices|get_item:line|get_item:counter}}</p>
                               

                                
                                 
                                  {% endwith %}
                                </div>
                              </form>
                              
                            </div>
                          {% endfor %}
                        </div>
                      {% endif %}
                    {% endfor %}
                  </div>
                </div>
              {% endfor %}
            </div>
              
                
                
           


            <div class="card mt-5 mx-5 py-3 px-3">
                <div class="row mx-5 mt-3">
                    
                    <div class="col-5 ml-1">
                        <form action="" method="POST">
                          {% csrf_token %}
                        <input value{{turno}} name="turno" class="d-none">
                        <input type="submit"   value="FIN DE TURNO" class="form-control  btn  btn-primary" id="floatingInput" >
                        <form>
                    </div>
                  
                    <div class="col-2 ml-1">
                        <button class="btn btn-secondary px-4 py-2" id="clock"></button>
                    </div>
                    <div class="col-3 mx-5">
                        <input type="text" name="username"  value="{{turno}}" disabled class="form-control" id="floatingInput" placeholder="{{name}}">
                    </div>
                    
                </div>

            </div>
              

           
            <script>
                function updateClock() {
                  var now = new Date();
                  var hours = now.getHours();
                  var minutes = now.getMinutes();
                  var seconds = now.getSeconds();
                  var timeString = hours.toString().padStart(2, "0") + ":" + minutes.toString().padStart(2, "0") + ":" + seconds.toString().padStart(2, "0");
                  document.getElementById("clock").innerHTML = timeString;
                }
              
                setInterval(updateClock, 1000);
              </script>

              <script>
                $(function() {
                    $('device-search').on('input', function() {
                        var query = $(this).val();
                        $.getJSON('/search_products/' + query, function(data) {
                            $('#search-results').empty();
                            $.each(data, function(index, product) {
                                $('<li>').text(product.name + ': $' + product.price).appendTo('#search-results');
                            });
                        });
                    });
                });
              </script>
                                






    </div> 
    
</body>
</html>